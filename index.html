<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Word Guess Game</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <!-- 
    <style>
        body {
            background: url(assets/images/hangman.jpg) no-repeat;
        }
    </style> -->

</head>

<body>

    <!-- Create screen layout for the game -->
    <div class="container">
        <div class="row">
            <div class="col-lg-12 gameTitle">Simon's Word Guessing Game</div>
        </div>
        <div class="row row2">
            <!-- <div class="col-lg-1"></div> -->
            <div class="col-lg-2 instructionsHeader">INSTRUCTIONS: </div>
            <div class="col-lg-4 instructions">You have 10 lives to guess the mystery word. Click on the letter buttons
                below to guess the word!!!</div>
            <div class="col-lg-1"></div>
            <div class="col-lg-2 categoryHeader">CATEGORY: </div>
            <div class="col-lg-2 category"> World Cities</div>
        </div>
        <div class="row row3">
            <div class="col-lg-12 buttons"></div>
        </div>
        <div class="row row4">
            <div class="col-lg-2 guessMe">Here is your Word: </div>
            <div class="col-lg-4 word-guess"></div>
            <div class="col-lg-4 livesRemaining">Number of Lives Remaining: </div>
            <div class="col-lg-2 livesleft"></div>
        </div>
        <div class="row row5">
            <div class="col-lg-12 guessResult"></div>
        </div>
        <div class="row row5">
            <div class="col-lg-4 gamesPlayed">Games Played: </div>
            <div class="col-lg-2 totalGames"></div>
            <div class="col-lg-4 gamesWon">Games Won: </div>
            <div class="col-lg-2 winTotal"></div>
        </div>
    </div>

    <!-- Store a random word from you list of words -->
    <script>

        // Define Global Variables
        var randomWordSelect = "";
        var underscores = [];
        var lives = 10;
        var winTotal = 0;
        var totalGames = 0;
        var congrats = false;
        $(".livesleft").text(lives);
        $(".totalGames").text(totalGames);
        $(".winTotal").text(winTotal);

        // Run the following once the document 'Browser Window' is ready
        $(document).ready(function () {

            // This function creates buttons on the screen for the user to pick from
            function displayLetterButton() {
                var letters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
                for (var i = 0; i < letters.length; i++) {
                    var letterBtn = $("<button>");
                    letterBtn.addClass("letter-button letter letter-button-color")
                    letterBtn.attr("data-letter", letters[i]);
                    letterBtn.text(letters[i]);
                    $(".buttons").append(letterBtn);
                }
            }

            // This function takes an array of words, randomly selects one and then prints out dashes for each letter in that word
            function wordSelect() {
                var wordList = ["London", "Paris", "Munich", "Washington", "Singapore", "Rome", "Madrid", "Porto", "Istanbul", "Sydney", "Dubai", "Tokyo", "Seoul", "Bangkok", "Barcelona", "Amsterdam", "Shanghai", "Prague"];
                randomWordSelect = wordList[Math.floor(Math.random() * wordList.length)];
                console.log(randomWordSelect);

                // Display the answer as "-"
                for (i = 0; i < randomWordSelect.length; i++) {
                    underscores.push("_");
                }

                // Prints the word as underscores to the screen
                $(".word-guess").text(underscores.join(" "));
                console.log(underscores);
            }

            // This function retrieves the letter selections from the user, via a click event on the oncreen keyboard
            function userGuess(underscores, randomWordSelect) {
                $(".letter-button").on("click", function () {
                    if (lives > 0) {
                        // console.log($(this).attr("data-letter"));
                        // console.log("Word within userGuess Function", randomWordSelect);
                        // console.log("'_' word within userGuess Function", underscores);
                        randomWordSelect = randomWordSelect.toLowerCase();
                        console.log ("Lowercase word: " +randomWordSelect);
                        var wordGuess = underscores;
                        var letterGuess = $(this).attr("data-letter").toLowerCase();
                        document.getElementById(this.style.backgroundColor="red");
                        //Change the color of the button text once it has been chosen
                        // $(this).attr("data-letter", font-color="red");
                        console.log("You have now had", lives, "guess/es?");
                        console.log(letterGuess);

                        //This loops through the word to check if the guessed letter exists and if so updates the display to show the letter in the word, rather than underscore
                        for (i = 0; i < randomWordSelect.length; i++) {
                            if (randomWordSelect[i] === letterGuess) {
                                console.log ("in for loop: " +randomWordSelect);
                                console.log("randomWordSelect,", i, ": ", randomWordSelect[i], " :letterGuess: ", letterGuess)
                                // wordGuess = wordGuess.replace(wordGuess[i], letterGuess);
                                console.log("word" ,wordGuess);
                                // console.log (typeof wordGuess);
                                wordGuess[i] = letterGuess;
                                congrats = true;
                                console.log(wordGuess);
                                $(".word-guess").text(wordGuess.join(" ").toLowerCase());
                            }
                        }

                        if (congrats === true) {
                            $(".guessResult").text("Congratulations the mystery word contains the letter: " + letterGuess.toUpperCase());
                            console.log("Congratulations the mystery word contains the letter: ", letterGuess.toUpperCase());
                            congrats=false;
                        }
                        else {
                            $(".guessResult").text("I'm sorry that letter is not in the hidden word!");
                            console.log("I'm sorry that letter is not in the hidden word!");
                            lives--;
                            $(".livesleft").text(lives);
                        }

                        console.log("wordGuess: "+wordGuess+" "+"randomWordSelect: "+randomWordSelect);
                        if (wordGuess === randomWordSelect) {
                            console.log("wordGuess: "+wordGuess+" "+"randomWordSelect: "+randomWordSelect);
                            $(".guessResult").text("CONGRATULATIONS:  You have solve the word and won the game");
                            winTotal++;
                            totalGames++
                        }
                        else if (wordGuess != randomWordSelect && lives===0) {
                            $(".guessResult").text("GAME OVER !!!  You've exhausted your 10 guesses and you haven't solved the hidden word");
                            totalGames++
                        }

                    };
            })
            
        }

        displayLetterButton();
        wordSelect();
        userGuess(underscores, randomWordSelect);

        })



    </script>

</body>

</html>